(global.webpackChunkxmind_vana=global.webpackChunkxmind_vana||[]).push([[5536],{52533:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var a=n(23645),i=n.n(a)()((function(e){return e[1]}));i.push([e.id,".new-win-title-bar[data-v-d9b18146] {\n  transition: all 0.1s ease-in-out;\n}\n.new-win-title-bar-default[data-v-d9b18146] {\n  background: transparent !important;\n  border-color: transparent !important;\n}\n.title-bar-icon[data-v-d9b18146] {\n  min-width: 16px;\n  min-height: 16px;\n  margin-right: 3px;\n}\n.title-bar-text[data-v-d9b18146] {\n  font-weight: 600;\n  font-size: 15px;\n  line-height: 20px;\n}\n.new-left-panel[data-v-d9b18146] {\n  width: 220px;\n}\n.new-right-panel[data-v-d9b18146] {\n  margin-top: 30px;\n}\n",""]);const s=i},49486:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>s});var a=n(23645),i=n.n(a)()((function(e){return e[1]}));i.push([e.id,".preview-container[data-v-55787c12] {\n  padding-top: 20px;\n}\n.preview-container .theme-category-name[data-v-55787c12] {\n  margin-top: 32px;\n  margin-bottom: 20px;\n  font-weight: bold;\n  font-size: 20px;\n  line-height: 25px;\n}\n.preview-container .theme-category-name[data-v-55787c12]:first-of-type {\n  margin-top: 0;\n}\n.preview-map-list[data-v-55787c12] {\n  list-style: none;\n  display: grid;\n  grid-template-columns: repeat(3, 1fr);\n  grid-column-gap: 24px;\n  grid-row-gap: 28px;\n}\n.uk-border-rounded[data-v-55787c12] {\n  border-radius: 10px;\n}\n.uk-win32 .uk-border-rounded[data-v-55787c12] {\n  border-radius: 4px;\n}\n",""]);const s=i},89807:(e,t,n)=>{"use strict";n.r(t);var a=n(51505),i=n(2954),s=n(63477),r=n.n(s),o=n(92636),l=n(54856),c=n(90435),u=n(18621),d=n(92870),p=n(23279),v=n.n(p),f=n(67657),m=n(71017),h=n.n(m),w=n(94593),b=n(33394),y=n(13382),g=n(69931),k=n(7104),x=n(69297),_=n(5893),C=n(96393),A=function(e,t,n,a){return new(n||(n=Promise))((function(i,s){function r(e){try{l(a.next(e))}catch(e){s(e)}}function o(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}l((a=a.apply(e,t||[])).next())}))};const T=(0,i.aZ)({name:"PreviewMap",props:{isShowLabel:Boolean,previews:{type:Array,default:()=>[]},selectFirst:{type:Boolean,default:!0},title:{type:String,default:""}},setup(e,t){const n=(0,i.iH)(null),a=e=>{n.value=e,t.emit("select",e)};return(0,i.bv)((()=>A(this,void 0,void 0,(function*(){e.selectFirst&&a(e.previews[0]&&e.previews[0].items[0])})))),{getFileNameDisplay:_.Uy,selectedItem:n,handleSelectItem:a,handleSubmit:()=>{t.emit("submit",n.value)}}}});n(76041);var S=n(51900);const L=(0,S.Z)(T,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"uk-overflow-overlay",staticStyle:{height:"calc(100vh - 30px)"}},[e._t("header"),e._v(" "),t("div",{staticStyle:{padding:"10px 46px"}},[e.title?t("h1",{staticClass:"uk-margin-remove",staticStyle:{"font-size":"34px"}},[e._v("\n      "+e._s(e.title)+"\n    ")]):e._e(),e._v(" "),t("form",{staticClass:"uk-panel preview-container",on:{submit:function(t){return t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[t("div",{attrs:{"uk-list-select":"","uk-traverse":"","data-traverse-mode":"nearest-item","data-item":".uk-card.uk-card-selectable","data-form":"true"}},[e._l(e.previews,(function(n){return[e.isShowLabel?t("h3",{key:n.label,staticClass:"theme-category-name"},[e._v("\n            "+e._s(n.label)+"\n          ")]):e._e(),e._v(" "),t("ul",{staticClass:"uk-margin-remove uk-padding-remove preview-map-list"},[e._t("list-header"),e._v(" "),e._l(n.items,(function(n){return t("li",{key:n.id},[t("div",{staticClass:"uk-flex uk-flex-column uk-flex-middle"},[t("img",{staticClass:"uk-card uk-card-default uk-card-selectable uk-background-cover uk-border-rounded uk-width-1-1",class:{"uk-active":n.id===(e.selectedItem&&e.selectedItem.id)},staticStyle:{height:"121px"},attrs:{tabindex:"0",draggable:"false",src:n.previewURL},on:{listselectitem:function(t){return e.handleSelectItem(n)},contextmenu:function(t){return e.$emit("contextmenu",n)}}}),e._v(" "),t("div",{staticClass:"uk-text-center uk-card-selectable-text uk-text-truncate",staticStyle:{"margin-top":"12px"},attrs:{title:e.getFileNameDisplay(n.name)}},[e._v("\n                  "+e._s(e.getFileNameDisplay(n.name))+"\n                ")])])])})),e._v(" "),e._t("list-footer")],2)]}))],2)])])],2)}),[],!1,null,"55787c12",null).exports;var R=n(77242),F=function(e,t,n,a){return new(n||(n=Promise))((function(i,s){function r(e){try{l(a.next(e))}catch(e){s(e)}}function o(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}l((a=a.apply(e,t||[])).next())}))};const O=(0,i.aZ)({name:"NewRecent",components:{PreviewMaps:L,VisibilitySensor:C.Z},setup(e,t){const n=(0,i.FN)().proxy,a=(e,...t)=>(0,d.JE)().T(e,...t),s=(0,i.iH)(!0),r=(0,i.iH)(null),o=(0,i.Fl)((()=>(0,d.km)().recentlyOpenedItems.slice(0,20))),p=(0,i.Fl)((()=>{const e=[],t=n.$toResourceURL("static/assets/images/new/thumbnail.svg");for(let{source:n,previewUrl:a}of o.value){if(!(0,_.ab)(n))continue;const i=h().join((0,k.D8)(),a||"");e.push({name:(0,_.ab)(n).slice(0,-6),id:n,previewURL:a&&a.endsWith("png")&&w.Z.existsSync(i)?g.pP(a):t})}return[{label:a("Recent File"),items:e}]})),m=v()((()=>{c.ZP.fetch(l.NF,{source:"new://workbook"}).then((()=>{window.close()})),(0,x.fv)(),(0,u.L9)({eventAction:"newLaunch",eventName:"createFile"})}),10);return{selectedFile:r,rencentItemsPreviews:p,createFromSelectedFile:()=>F(this,void 0,void 0,(function*(){if(!r.value)return;const e=r.value.id,t=(0,_.iZ)(e);if(!(yield b.Z.obtainRWAccessFromOS(t)))return yield(0,y.N0)({type:"warning",message:a("Failed to Open"),detail:a("Xmind does not have permission to open this file."),buttons:[a("OK")]}),void(0,d.km)().removeRecentlyOpenedItem(e);yield(0,d.JX)().handleCommand("openRecentFileItem",[e]),w.Z.existsSync(t)&&window.close(),(0,u.L9)({eventAction:"newLaunch",eventName:"openRecent"})})),openRecentFileCtxMenu:({id:e})=>{const t=()=>F(this,void 0,void 0,(function*(){const t=o.value.find((t=>t.source===e));if((0,d.km)().removeRecentlyOpenedItem(e),t&&t.previewUrl&&t.previewUrl.endsWith("png")){const e=h().join((0,k.D8)(),t.previewUrl);w.Z.existsSync(e)&&(yield w.Z.remove(e))}})),n=[{label:a("Remove"),click:t},{label:a("Remove All"),click:()=>(0,d.JX)().handleCommand("cleanRecent")},{type:"separator"},{label:a("Open File Location"),click:()=>F(this,void 0,void 0,(function*(){const n=(0,_.iZ)(e);w.Z.existsSync(n)?f.shell.showItemInFolder(n):(f.dialog.showMessageBox({type:"error",title:"Xmind",message:a("Open Recent"),detail:a("This file does not exist. It may have been deleted or moved to another location."),buttons:[a("OK")],cancelId:0}),yield t())}))}];(0,R.k)(n)},handleNewMap:m,atTop:s,handleAtTopChange:e=>{s.value=e,t.emit("onAtTopChange",{tab:"recent",atTop:e})}}}});const I=(0,S.Z)(O,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("preview-maps",{class:{"uk-scrollbar-hidden":e.atTop},attrs:{title:e.$T("Recents"),previews:e.rencentItemsPreviews,"select-first":!1},on:{select:function(t){e.selectedFile=t},submit:e.createFromSelectedFile,contextmenu:e.openRecentFileCtxMenu}},[t("visibility-sensor",{attrs:{slot:"header"},on:{onVisibleChange:e.handleAtTopChange},slot:"header"}),e._v(" "),t("li",{attrs:{slot:"list-header"},slot:"list-header"},[t("div",{staticClass:"uk-flex uk-flex-column uk-flex-middle"},[t("div",{staticClass:"uk-flex uk-flex-middle uk-flex-center uk-card uk-card-default uk-card-selectable uk-background-cover uk-border-rounded",staticStyle:{width:"195px",height:"121px"},attrs:{tabindex:"0"},on:{click:function(t){return t.preventDefault(),e.handleNewMap.apply(null,arguments)}}},[t("img",{attrs:{draggable:"false",src:e.$toResourceURL("static/assets/images/new/new.svg")}})]),e._v(" "),t("span",{staticClass:"uk-text-center uk-card-selectable-text",staticStyle:{"margin-top":"12px"}},[e._v("\n        "+e._s(e.$T("New"))+"\n      ")])])])],1)}),[],!1,null,null,null).exports;var P=n(68898);const N=(0,i.aZ)({name:"NewTemplate",components:{PreviewMaps:L,VisibilitySensor:C.Z},setup(e,t){const n=(0,i.FN)().proxy,a=(0,i.iH)(!0),s=(0,i.Fl)((()=>{const{language:e}=(0,d.S)();return P.Bv({lang:e}).map((e=>({label:e.name,items:e.items.map((e=>({id:`static/snowbird/resource/${e.resource}`,name:e.name,previewURL:n.$toResourceURL(`static/snowbird/resource/${e.preview}`)})))})))})),r=(0,i.iH)(null);return{selectedTemplate:r,createFromSelectedTemplate:()=>{if(!r.value)return;const e=`new://workbook?template=${encodeURIComponent(r.value&&r.value.id)}&title=${encodeURIComponent(r.value&&r.value.name)}`;n.$safeRun((()=>Promise.all([c.ZP.fetch(l.NF,{source:e})]).then((()=>{(0,x.fv)(),window.close()})))).catch((()=>{window.close()})),(0,u.L9)({eventAction:"newLaunch",eventName:"openTemplate"})},allTemplates:s,atTop:a,handleAtTopChange:e=>{a.value=e,t.emit("onAtTopChange",{tab:"template",atTop:e})}}}});const Z=(0,S.Z)(N,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("preview-maps",{class:{"uk-scrollbar-hidden":e.atTop},attrs:{title:e.$T("Templates"),previews:e.allTemplates,"is-show-label":!0},on:{select:function(t){e.selectedTemplate=t},submit:e.createFromSelectedTemplate}},[t("visibility-sensor",{attrs:{slot:"header"},on:{onVisibleChange:e.handleAtTopChange},slot:"header"})],1)}),[],!1,null,null,null).exports;var D=n(16704),M=n(86633),$=function(e,t,n,a){return new(n||(n=Promise))((function(i,s){function r(e){try{l(a.next(e))}catch(e){s(e)}}function o(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}l((a=a.apply(e,t||[])).next())}))};const W=(0,M.ZP)("new-library"),E=(0,i.aZ)({name:"NewLibrary",components:{PreviewMaps:L,VisibilitySensor:C.Z},props:{isCompActive:Boolean},setup(e,t){const n=(0,i.iH)(!0),a=(0,i.iH)(null),s=(0,i.iH)(!1),r=(0,i.Fl)((()=>(0,d.qr)().serviceRegion)),o=(0,i.Fl)((()=>(0,d.jR)().libraryItems)),p=(0,i.Fl)((()=>[{label:"Gallery",items:o.value}])),v=()=>$(this,void 0,void 0,(function*(){try{const e=(yield c.ZP.fetch(l.lf.LIBRARY_ITEMS)).map(((e,t)=>{const n=e.thumbnailUrl.replace(/^https/,"cache");return t<6&&c.ZP.fetch(l.lf.FILE_DOWNLOAD,{downloadUrl:n,filename:(0,D.VR)(n)}).catch((()=>{})),{name:"string"==typeof e.topic&&e.topic.trim(),previewURL:n,id:e.id}}));(0,d.jR)().updateLibraryItems(e)}catch(e){W.error("Failed to get library items:",(0,D.SC)(e))}}));(0,i.YP)(r,(()=>v())),(0,i.YP)((()=>e.isCompActive),(e=>{e&&v()}));return{selectedLibraryItem:a,isDownloading:s,serviceRegion:r,libraryItems:o,libraryItemsPreviews:p,createFromLibrary:()=>{const e=a.value&&a.value.id;e&&(s.value||(s.value=!0,c.ZP.fetch(l.lf.LIBRARY_DOWNLOAD,{id:e}).then((e=>{(0,x.fv)(),s.value=!1,c.ZP.fetch(l.NF,{source:e}).then((()=>{window.close()}))})).catch((t=>{s.value=!1,W.error("Failed to download workbook from library:",e,(0,D.SC)(t))})),(0,u.L9)({eventAction:"newLaunch",eventName:"openLibrary"})))},openMoreMaps:()=>{c.ZP.fetch(l.lf.GO_LIBRARY_MORE_MAPS),(0,u.L9)({eventCategory:"NewPanel",eventAction:"jumpToMore"})},atTop:n,handleAtTopChange:e=>{n.value=e,t.emit("onAtTopChange",{tab:"library",atTop:e})}}}});const B=(0,S.Z)(E,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("preview-maps",{class:{"uk-scrollbar-hidden":e.atTop},attrs:{title:e.$T("Library"),previews:e.libraryItemsPreviews},on:{select:function(t){e.selectedLibraryItem=t},submit:e.createFromLibrary}},[t("visibility-sensor",{attrs:{slot:"header"},on:{onVisibleChange:e.handleAtTopChange},slot:"header"}),e._v(" "),t("li",{attrs:{slot:"list-footer"},slot:"list-footer"},[t("div",{staticClass:"uk-flex uk-flex-column uk-flex-middle"},[t("div",{staticClass:"uk-flex uk-flex-middle uk-flex-center uk-card uk-card-default uk-card-selectable uk-background-cover uk-border-rounded",staticStyle:{width:"195px",height:"121px"},attrs:{tabindex:"0"},on:{click:function(t){return t.preventDefault(),e.openMoreMaps.apply(null,arguments)}}},[t("img",{attrs:{draggable:"false",src:e.$toResourceURL("static/assets/images/new/more.svg")}})]),e._v(" "),t("span",{staticClass:"uk-text-center uk-card-selectable-text",staticStyle:{"margin-top":"12px"}},[e._v("\n        "+e._s(e.$T("More Maps"))+"\n      ")])])])],1)}),[],!1,null,null,null).exports,U=(0,i.aZ)({name:"NewWindow",components:{NewRecent:I,NewTemplate:Z,NewLibrary:B},setup(){const e=(0,i.FN)().proxy,t=(e,...t)=>(0,d.JE)().T(e,...t),n=r().parse(window.location.search.slice(1)),a=(0,i.iH)("template"),s=e.$toResourceURL("static/assets/images/new/appIcon.svg"),p=(0,i.iH)({recent:!1,template:!1,library:!1}),v=(0,i.Fl)((()=>(0,d.S)().isLaunchWinVisible)),f=(0,i.Fl)((()=>"dark"===(0,d.S)().appearance)),m=(0,i.Fl)((()=>{const e={background:f.value?"#222425":"#f5f5f5",position:"absolute",top:0,right:0,left:"220px"};return p.value[a.value]||f.value||(e.background="#fff !important"),Object.assign(Object.assign({},e),{height:"32px"})})),h=(0,i.Fl)((()=>{(0,d.Yh)().status,o.wi.VALID,(0,d.Yh)().hasRawPerMachineLicenseDataValidated;return!0})),w=(0,i.Fl)((()=>{const e=(0,i.FN)().proxy;return[{id:"recent",name:t("Recents"),isAvailable:!0,click:()=>{a.value="recent"},icon:e.$toResourceURL("static/assets/images/new/recent.svg")},{id:"template",name:t("Templates"),isAvailable:!0,click:()=>{a.value="template"},icon:e.$toResourceURL("static/assets/images/new/template.svg")},{id:"library",name:t("Library"),isAvailable:h.value,click:e=>{if(o.nd)return e.preventDefault(),e.stopPropagation(),void c.ZP.fetch(l.QN);a.value="library"},icon:e.$toResourceURL("static/assets/images/new/library.svg")}].filter((e=>e.isAvailable))})),b=(0,i.Fl)((()=>w.value.find((e=>e.id===a.value)).name)),y=(0,i.Fl)((()=>w.value.findIndex((e=>e.id===a.value))));(0,i.bv)((()=>{n.tab?a.value=n.tab:a.value=w.value[0].id,(0,i.YP)((()=>v.value),(e=>{e||(0,u.L9)({eventAction:"cancelLaunchPage"})}))}));return{isMac:false,isDark:f,iconURL:s,winTitleBarStyle:m,activeTabId:a,activeTabName:b,activeTabIndex:y,tabs:w,isLibaryAvailable:h,openExistingFile:()=>{(0,d.JX)().handleCommand("open"),(0,u.L9)({eventAction:"newLaunch",eventName:"openLocalFile"})},isLaunchWinVisible:v,handleLaunchWinVisible:()=>{(0,d.S)().updatePreferences({isLaunchWinVisible:!v.value})},isWinTitleBarActive:p,handleAtTopChange:({tab:e,atTop:t})=>{e===a.value&&(p.value[e]=!t)},$T:t}}});n(18447);const V=(0,S.Z)(U,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{staticClass:"uk-window uk-window-dialog"},[t("div",{staticClass:"uk-window-title-bar new-win-title-bar",class:{"new-win-title-bar-default":!e.isWinTitleBarActive[e.activeTabId]},style:e.winTitleBarStyle},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isMac&&e.isWinTitleBarActive[e.activeTabId],expression:"isMac && isWinTitleBarActive[activeTabId]"}],staticClass:"uk-window-title"},[e._v("\n      "+e._s(e.activeTabName)+"\n    ")]),e._v(" "),t("window-control-button-group",{style:!e.isMac&&{height:"32px"}})],1),e._v(" "),t("div",{staticClass:"uk-flex uk-width-1-1 uk-height-1-1 uk-overflow-hidden"},[t("div",{staticClass:"uk-workbench-left uk-panel uk-position-relative uk-height-1-1 uk-flex uk-flex-column new-left-panel"},[t("div",{staticClass:"uk-window-title-bar uk-position-absolute uk-position-top",staticStyle:{"-webkit-app-region":"drag"}},[e.isMac?e._e():t("div",{staticClass:"uk-flex uk-flex-middle",style:!e.isMac&&{height:"32px"}},[t("div",{staticClass:"title-bar-icon",attrs:{"uk-img":"","data-src":e.iconURL}}),e._v(" "),t("div",{staticClass:"title-bar-text"},[e._v("Xmind")])])]),e._v(" "),t("div",{staticClass:"uk-flex-1 uk-flex uk-flex-column uk-flex-between",staticStyle:{padding:"40px 16px 20px"},style:{marginTop:e.isMac?null:"8px"}},[t("ul",{staticClass:"uk-tab uk-tab-new-capsule uk-flex-column",attrs:{"uk-tab":"connect: .main-content-switcher","data-active":e.activeTabIndex}},e._l(e.tabs,(function(n){return t("li",{key:n.id},[t("a",{staticClass:"uk-flex-middle",staticStyle:{display:"flex","line-height":"30px"},attrs:{draggable:"false",href:"#"},on:{click:n.click}},[t("img",{staticStyle:{"margin-right":"6px"},attrs:{draggable:"false",src:n.icon,"uk-svg":""}}),e._v(" "),t("span",[e._v(e._s(n.name))])])])})),0),e._v(" "),t("button",{staticClass:"uk-button uk-button-default uk-width-1-1",attrs:{tabindex:"1"},on:{click:e.openExistingFile}},[e._v("\n          "+e._s(e.$T("Open Local File"))+"\n        ")])]),e._v(" "),t("hr",{staticClass:"uk-margin-remove-vertical uk-width-1-1"}),e._v(" "),t("div",{staticClass:"uk-flex uk-flex-middle",staticStyle:{height:"54px","padding-left":"16px"}},[t("label",[t("input",{staticClass:"uk-checkbox",attrs:{type:"checkbox"},domProps:{checked:e.isLaunchWinVisible},on:{change:e.handleLaunchWinVisible}}),e._v(" "),t("span",{staticStyle:{"font-weight":"500"}},[e._v(e._s(e.$T("Show on Startup")))])])])]),e._v(" "),t("div",{staticClass:"uk-flex-1 uk-position-relative uk-height-1-1 uk-overflow-hidden new-right-panel",style:!e.isDark&&{background:"#fff"}},[t("ul",{staticClass:"uk-switcher main-content-switcher"},[t("li",[t("new-recent",{on:{onAtTopChange:e.handleAtTopChange}})],1),e._v(" "),t("li",[t("new-template",{on:{onAtTopChange:e.handleAtTopChange}})],1),e._v(" "),t("li",{directives:[{name:"show",rawName:"v-show",value:e.isLibaryAvailable,expression:"isLibaryAvailable"}]},[t("new-library",{attrs:{"is-comp-active":"library"===e.activeTabId},on:{onAtTopChange:e.handleAtTopChange}})],1)])])])])}),[],!1,null,"d9b18146",null).exports;(0,a.Z)(V,{name:"new"})},13382:(e,t,n)=>{"use strict";n.d(t,{G$:()=>_,N0:()=>h,Pg:()=>A,R2:()=>x,W5:()=>k,ZZ:()=>b,am:()=>g,eq:()=>y,yr:()=>C});var a=n(71017),i=n.n(a),s=n(67657),r=n(7104),o=n(86633),l=n(33394),c=n(94593),u=n(90435),d=n(54856),p=n(5893),v=n(92870),f=n(92636);const m=(0,o.ZP)("dialog");async function h(e){(e=Object.assign({},e||{})).icon&&"string"==typeof e.icon&&(e.icon=i().join((0,r.bY)(),e.icon));const t=s.BrowserWindow.fromId(window.id);return[s.dialog.showMessageBoxSync(t,e)]}async function w(e){(e=Object.assign({},e||{})).icon&&"string"==typeof e.icon&&(e.icon=i().join((0,r.bY)(),e.icon));const t=s.BrowserWindow.fromId(window.id),{response:n,checkboxChecked:a}=await s.dialog.showMessageBox(t,e);return[n,a]}async function b(e){(e=Object.assign({securityScopedBookmarks:!0},e||{})).suggestPath&&!e.defaultPath&&(e.defaultPath=g(e.suggestPath,e.filters),delete e.suggestPath);const{canceled:t,filePath:n,bookmark:a}=await s.dialog.showSaveDialog(s.getCurrentWindow(),e);return t?null:(n&&a&&await l.Z.bindBookmark({fp:n,bookmark:a}),n&&(0,v.km)().setLastSaveDirectory(i().dirname(n)),n)}async function y({folderName:e,dialogOptions:t}){let n="";(t=Object.assign({securityScopedBookmarks:!0},t||{})).defaultPath||(t.defaultPath=g({}));const{canceled:a,filePaths:r,bookmark:o}=await s.dialog.showOpenDialog(s.getCurrentWindow(),t);if(a)return null;if(n=r[0],r.length>0&&o&&await l.Z.bindBookmark({fp:n,bookmark:o}),"string"==typeof e){let t=e.replace(/[\\/]/g,"");0,n=i().join(n,t)}return c.Z.existsSync(n)||c.Z.ensureDir(n),n&&(0,v.km)().setLastSaveDirectory(n),n}function g({doc:e=null,oldDoc:t=null,suggestedName:n=null},a=null){let r,o;if(!r&&n&&(r=(0,p.N6)(n.toString())),!r&&e&&e.title&&e.source&&!e.source.startsWith("new://")&&(r=(0,p.N6)(e.title.toString())),!r&&t&&t.title&&t.source&&!t.source.startsWith("new://")&&(r=(0,p.N6)(t.title.toString())),r&&Array.isArray(a)){const e=a[0]&&a[0].extensions;Array.isArray(e)&&e.length>0&&(r=`${r}.${e[0]}`)}if(!o&&t&&t.source&&t.source.startsWith("file://")){let e=t.source.slice(7);0,o=i().dirname(e)}if(!o&&(0,v.km)().lastSaveDirectory&&(o=(0,v.km)().lastSaveDirectory),!o)try{o=s.app.getPath("documents")}catch(e){m.info(e)}return o&&r?i().join(o,r):o||r}async function k(e){e.$withUIKit((t=>{const n=`\n        <button\n        class="uk-button uk-button-text uk-text-nowrap"\n        style="word-break: keep-all;"\n        focustrigger="cannotGetFocusByMouse">\n          ${e.$T("OK")}\n        </button>\n        </div>`;t.toast({message:e.$T("The map style has been updated for your current version of Xmind."),pos:"bottom-center",timeout:5e3,btn:n,style:{width:"500px",height:"auto",padding:"10px 20px"},btnClick:t.toast.clearAll()})}))}async function x(e){const t=(e="function"!=typeof e?e=>e:e)("OK"),n=e("Get Latest Version"),a=[t,n],[i]=await w({title:"Xmind",message:e("The map style in this file might vary since it was created in a newer version of Xmind."),detail:e("You can continue to open the file or update to the latest version for better compatibility."),buttons:a,defaultId:a.indexOf(n),cancelId:a.indexOf(t),noLink:!0});i===a.indexOf(n)&&u.ZP.fetch(d.lf.GO_DOWNLOAD)}async function _(e){if(e="function"!=typeof e?e=>e:e,f.zr)return await w({title:"Xmind",message:e("Failed to Open File"),detail:e("The file was created with a newer version of Xmind. Please contact your corporate administrator for the latest update."),buttons:[e("Done")],defaultId:0,noLink:!0});const t=e("Cancel"),n=e("Get Latest Version"),a=[n,t],[i]=await w({title:"Xmind",message:e("Failed to Open File"),detail:e("The file was created by a newer version of Xmind. Please update Xmind and try to open it again."),buttons:a,defaultId:a.indexOf(n),cancelId:a.indexOf(t),noLink:!0});i===a.indexOf(n)&&u.ZP.fetch(d.lf.GO_DOWNLOAD)}async function C(e){const t=(e="function"!=typeof e?e=>e:e)("Save"),n=e("Save as"),a=e("Cancel"),i=[];i.push(t,a,n);let[s]=await w({type:"none",title:"Xmind",message:e("Saving file from Xmind"),detail:e("Once you save the file, it cannot be opened normally in older versions like $1.","Xmind 22.11"),buttons:i,defaultId:i.indexOf(n),cancelId:i.indexOf(a),noLink:!0});const r=s===i.indexOf(t),o=s===i.indexOf(n);return{toSave:r,toSaveAs:o,toCancel:!r&&!o}}async function A(e){const t=(e="function"!=typeof e?e=>e:e)("Fix ï¼† Open"),n=e("Cancel"),a=[t,n],[i]=await w({title:"Xmind",message:e("Failed to Open File"),detail:e("The file may contain invalid data structure or have become corrupted. Xmind can try to fix the data structure to help you open it."),buttons:a,defaultId:a.indexOf(t),cancelId:a.indexOf(n),noLink:!0});return{toFix:i===a.indexOf(t),toCancel:i===a.indexOf(n)}}},33394:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var a=n(57147),i=n.n(a),s=n(71017),r=n.n(s),o=n(73837),l=n(86633),c=n(16704),u=n(56222);const d=(0,l.ZP)("renderer:fs");async function p(e){return(0,u.A)("OBTAIN_READ_WRITE_ACCESS",e)}async function v(e){return(0,u.A)("RELEASE_READ_WRITE_ACCESS",e)}const f={read:async function(e){if(!r().isAbsolute(e))throw new Error("Must be an absolute path.");const t=await async function(e){return(0,u.A)("OBTAIN_READ_LOCK",e)}(e);try{return await(0,o.promisify)(i().readFile)(e)}catch(t){d.error(`path(${e}) read error: ${(0,c.SC)(t)}`);try{if(!await p(e))throw new Error(`No access to '${e}'`);return await(0,o.promisify)(i().readFile)(e)}catch(e){throw e}finally{await v(e)}}finally{await async function(e){return(0,u.A)("RELEASE_READ_LOCK",e)}(t)}},write:async function(e,t){if(!r().isAbsolute(e))throw new Error("Must be an absolute path.");const n=await async function(e){return(0,u.A)("OBTAIN_WRITE_LOCK",e)}(e);try{return await(0,o.promisify)(i().writeFile)(e,t)}catch(n){d.error(`path(${e}) write error: ${(0,c.SC)(n)}`);try{if(!await p(e))throw new Error(`No access to '${e}'`);return await(0,o.promisify)(i().writeFile)(e,t)}catch(e){throw e}finally{await v(e)}}finally{await async function(e){return(0,u.A)("RELEASE_WRITE_LOCK",e)}(n)}},bindBookmark:async function({fp:e,bookmark:t}={}){return(0,u.A)("BIND_BOOKMARK",{fp:e,bookmark:t})},hasRWAccess:async function(e){return(0,u.A)("HAS_READ_WRITE_ACCESS",e)},obtainRWAccessFromOS:p,releaseRWAccessFromOS:v}},77242:(e,t,n)=>{"use strict";n.d(t,{I:()=>r,k:()=>s});var a=n(67657);const{Menu:i}=a,s=(e,t={})=>{const n=i.buildFromTemplate(e);return n.popup(Object.assign({window:a.getCurrentWindow()},t)),n},r=()=>{const e=i.getApplicationMenu();return e&&e.items||[]}},96393:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});var a=n(2954),i=function(e,t,n,a){return new(n||(n=Promise))((function(i,s){function r(e){try{l(a.next(e))}catch(e){s(e)}}function o(e){try{l(a.throw(e))}catch(e){s(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(r,o)}l((a=a.apply(e,t||[])).next())}))};const s=(0,a.aZ)({name:"VisibilitySensor",props:{options:Object,onVisibleChange:Function},setup(e,t){const n=(0,a.iH)(null);let s=null;return(0,a.bv)((()=>i(this,void 0,void 0,(function*(){yield new Promise((e=>setTimeout(e,0))),n.value&&(s=new IntersectionObserver((([e])=>{t.emit("onVisibleChange",e.isIntersecting)}),Object.assign({root:n.value.parentElement},e.options)),s.observe(n.value))})))),(0,a.Jd)((()=>{s&&s.disconnect()})),{entryContainer:n}}});const r=(0,n(51900).Z)(s,(function(){var e=this,t=e._self._c;e._self._setupProxy;return t("div",{ref:"entryContainer"},[e._t("default")],2)}),[],!1,null,null,null).exports},18447:(e,t,n)=>{var a=n(52533);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,n(45346).Z)("c1366c5a",a,!0,{})},76041:(e,t,n)=>{var a=n(49486);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[e.id,a,""]]),a.locals&&(e.exports=a.locals);(0,n(45346).Z)("512a376e",a,!0,{})},6113:e=>{"use strict";e.exports=require("crypto")},72298:e=>{"use strict";e.exports=require("electron")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},63477:e=>{"use strict";e.exports=require("querystring")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")}},e=>{e.O(0,[5565,1505],(()=>{return t=89807,e(e.s=t);var t}));var t=e.O();module.exports=t}]);